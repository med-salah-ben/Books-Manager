<form [formGroup]="bookForm" (ngSubmit)="onSubmit()" novalidate class="mb-4">
  <div class="mb-3">
    <label for="titre" class="form-label">Titre</label>
    <input type="text" class="form-control" id="titre" formControlName="titre">
    <div class="text-danger" *ngIf="f.titre.touched && f.titre.invalid">
      <small *ngIf="f.titre.errors?.['required']">Titre is required.</small>
      <small *ngIf="f.titre.errors?.['minlength']">Titre must be at least 2 characters.</small>
    </div>
  </div>

  <div class="mb-3">
    <label for="auteur" class="form-label">Auteur</label>
    <input type="text" class="form-control" id="auteur" formControlName="auteur">
    <div class="text-danger" *ngIf="f.auteur.touched && f.auteur.invalid">
      <small *ngIf="f.auteur.errors?.['required']">Auteur is required.</small>
    </div>
  </div>

  <div class="mb-3">
    <label for="annee" class="form-label">Année</label>
    <input type="number" class="form-control" id="annee" formControlName="annee">
    <div class="text-danger" *ngIf="f.annee.touched && f.annee.invalid">
      <small *ngIf="f.annee.errors?.['required']">Année is required.</small>
      <small *ngIf="f.annee.errors?.['min']">Année must be valid (≥ 1000).</small>
      <small *ngIf="f.annee.errors['max']">Year cannot be greater than {{ currentYear }}.</small>
    </div>
  </div>

  <button type="submit" class="btn btn-primary me-2" [disabled]="bookForm.invalid">
    {{ isEditMode ? 'Update' : 'Create' }}
  </button>
  <button type="button" class="btn btn-secondary" (click)="resetForm()" *ngIf="isEditMode">
    Cancel
  </button>
</form>
